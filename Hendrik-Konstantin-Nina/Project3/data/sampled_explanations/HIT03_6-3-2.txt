1: As I said in my previous answer; I'm pretty sure the issue is with one of the Character.codePointAt method calls.  It also would require the "pos" variable to reach the value of 2 to have thrown the error listed above.  I can't figure out any way for the "pos" variable to reach a value of 2 and still execute another iteration of the loop (which might lead to the execution of line 87 and an exception there).  Each time the "pos" variable is changed (potentially to an invalid amount) the continue keyword sends the program back to line 84 where the "pos" value is checked against the "len" variable for validity.    Therefore; it seems that the only place where the exception could be coming from is line 95.
2: On line 85; a recursive call is made to the function with an improper number of arguments and expecting a return value.
3: depending on the input; the "pos" could be longer than the length of the input.
